{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sa/dev/git/comicstack-backend/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sa/dev/git/comicstack-backend/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sa/dev/git/comicstack-backend/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/sa/dev/git/comicstack-backend/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useReducer,useContext,createContext}from\"react\";import axios from\"axios\";// import { defaultValue } from 'model/lecture.model';\nimport{jsx as _jsx}from\"react/jsx-runtime\";var initialState={error:false,loading:false,entities:[{user_id:\"\",day:\"\",title:\"\",thumbnail_path:\"\",context:\"\",toon_sid:0}]};function reducer(state,action){switch(action.type){case\"GET_LIST\":return _objectSpread(_objectSpread({},state),{},{entities:action.payload,loading:true});default:throw new Error(\"Unhanded action type: \".concat(action.type));}}var LectureListStateContext=/*#__PURE__*/createContext(initialState);var LectureListDispatchcontext=/*#__PURE__*/createContext(null);export function useStateLectureList(){return useContext(LectureListStateContext);}export function useDispatchLectureList(){return useContext(LectureListDispatchcontext);}export var LectureListProvider=function LectureListProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return/*#__PURE__*/_jsx(LectureListStateContext.Provider,{value:state,children:/*#__PURE__*/_jsx(LectureListDispatchcontext.Provider,{value:dispatch,children:children})});};export function getList(_x,_x2){return _getList.apply(this,arguments);}function _getList(){_getList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,userId){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"/api/toon/getmytoon\",{user_id:userId}//json object?\n);case 3:response=_context.sent;console.log(\"get my toon list \",userId,response.data);if(response.data){dispatch({type:\"GET_LIST\",payload:response.data.toons});}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);//dispatch({ type: \"GET_DATA_FAIL\", error: e });\nconsole.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _getList.apply(this,arguments);}","map":{"version":3,"sources":["/Users/sa/dev/git/comicstack-backend/webapp/src/contextAPI/lecture.js"],"names":["React","useReducer","useContext","createContext","axios","initialState","error","loading","entities","user_id","day","title","thumbnail_path","context","toon_sid","reducer","state","action","type","payload","Error","LectureListStateContext","LectureListDispatchcontext","useStateLectureList","useDispatchLectureList","LectureListProvider","children","dispatch","getList","userId","post","response","console","log","data","toons"],"mappings":"ooBAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,UAA5B,CAAwCC,aAAxC,KAA6D,OAA7D,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA;2CAGA,GAAMC,CAAAA,YAAY,CAAG,CACpBC,KAAK,CAAE,KADa,CAEpBC,OAAO,CAAE,KAFW,CAGpBC,QAAQ,CAAE,CAAC,CACRC,OAAO,CAAE,EADD,CAERC,GAAG,CAAE,EAFG,CAGRC,KAAK,CAAE,EAHC,CAIRC,cAAc,CAAE,EAJR,CAKRC,OAAO,CAAE,EALD,CAMRC,QAAQ,CAAE,CANF,CAAD,CAHU,CAArB,CAcA,QAASC,CAAAA,OAAT,CAAiBC,KAAjB,CAAwBC,MAAxB,CAAgC,CAC9B,OAAQA,MAAM,CAACC,IAAf,EACE,IAAK,UAAL,CACE,sCACKF,KADL,MAEER,QAAQ,CAAES,MAAM,CAACE,OAFnB,CAGFZ,OAAO,CAAE,IAHP,GAKF,QACE,KAAM,IAAIa,CAAAA,KAAJ,iCAAmCH,MAAM,CAACC,IAA1C,EAAN,CARJ,CAUD,CAED,GAAMG,CAAAA,uBAAuB,cAAGlB,aAAa,CAACE,YAAD,CAA7C,CACA,GAAMiB,CAAAA,0BAA0B,cAAGnB,aAAa,CAAC,IAAD,CAAhD,CAEA,MAAO,SAASoB,CAAAA,mBAAT,EAA+B,CACpC,MAAOrB,CAAAA,UAAU,CAACmB,uBAAD,CAAjB,CACD,CAED,MAAO,SAASG,CAAAA,sBAAT,EAAkC,CACvC,MAAOtB,CAAAA,UAAU,CAACoB,0BAAD,CAAjB,CACD,CAED,MAAO,IAAMG,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,iBACvBzB,UAAU,CAACc,OAAD,CAAUV,YAAV,CADa,4CAC1CW,KAD0C,iBACnCW,QADmC,iBAGjD,mBACE,KAAC,uBAAD,CAAyB,QAAzB,EAAkC,KAAK,CAAEX,KAAzC,uBACE,KAAC,0BAAD,CAA4B,QAA5B,EAAqC,KAAK,CAAEW,QAA5C,UACGD,QADH,EADF,EADF,CAOD,CAVM,CAYP,eAAsBE,CAAAA,OAAtB,gD,qFAAO,iBAAuBD,QAAvB,CAAiCE,MAAjC,qKAEoBzB,CAAAA,KAAK,CAAC0B,IAAN,CACrB,qBADqB,CAExB,CAAErB,OAAO,CAAEoB,MAAX,CAAoB;AAFI,CAFpB,QAEGE,QAFH,eAMHC,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAiCJ,MAAjC,CAAyCE,QAAQ,CAACG,IAAlD,EACA,GAAIH,QAAQ,CAACG,IAAb,CAAmB,CACjBP,QAAQ,CAAC,CAAET,IAAI,CAAE,UAAR,CAAoBC,OAAO,CAAEY,QAAQ,CAACG,IAAT,CAAcC,KAA3C,CAAD,CAAR,CACD,CATE,+EAWH;AACAH,OAAO,CAACC,GAAR,cAZG,oE","sourcesContent":["import React, { useReducer, useContext, createContext } from \"react\";\nimport axios from \"axios\";\n// import { defaultValue } from 'model/lecture.model';\n\n\nconst initialState = {\n\terror: false,\n\tloading: false,\n\tentities: [{\n    user_id: \"\",\n    day: \"\",\n    title: \"\",\n    thumbnail_path: \"\",\n    context: \"\",\n    toon_sid: 0,\n  }],\n}\n\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"GET_LIST\":\n      return {\n        ...state,\n        entities: action.payload,\n\t\t\t\tloading: true\n      };\n    default:\n      throw new Error(`Unhanded action type: ${action.type}`);\n  }\n}\n\nconst LectureListStateContext = createContext(initialState);\nconst LectureListDispatchcontext = createContext(null);\n\nexport function useStateLectureList() {\n  return useContext(LectureListStateContext);\n}\n\nexport function useDispatchLectureList() {\n  return useContext(LectureListDispatchcontext);\n}\n\nexport const LectureListProvider = ({children}) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return (\n    <LectureListStateContext.Provider value={state}>\n      <LectureListDispatchcontext.Provider value={dispatch}>\n        {children}\n      </LectureListDispatchcontext.Provider>\n    </LectureListStateContext.Provider>\n  );\n}\n\nexport async function getList(dispatch, userId) {\n  try {\n    const response = await axios.post(\n      \"/api/toon/getmytoon\",\n\t\t\t{ user_id: userId } //json object?\n    );\n    console.log(\"get my toon list \", userId, response.data);\n    if (response.data) {\n      dispatch({ type: \"GET_LIST\", payload: response.data.toons });\n    }\n  } catch (e) {\n    //dispatch({ type: \"GET_DATA_FAIL\", error: e });\n    console.log(e);\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}