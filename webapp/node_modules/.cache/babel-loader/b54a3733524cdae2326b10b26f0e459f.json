{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sa/dev/git/comicstack-backend/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sa/dev/git/comicstack-backend/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sa/dev/git/comicstack-backend/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/sa/dev/git/comicstack-backend/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useReducer,useContext,createContext}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={error:false,loading:false,entity:{user_id:\"\",password:\"\",address:\"\",phone_number:\"\",persnal_basic_agree:false,persnal_share_agree:false,email:\"\",sms_agree:false,email_agree:false,name:\"\",status:false},signinLoading:false,signin:false,idCheckLoading:false,idCheck:false,loginLoading:false,login:false};function reducer(state,action){switch(action.type){case\"SIGNIN\":return _objectSpread(_objectSpread({},state),{},{// signin: action.data,\nsigninloading:true});case\"ID_CHECK\":return _objectSpread(_objectSpread({},state),{},{idCheck:action.idCheck,idCheckLoading:true});case\"LOGIN\":return _objectSpread(_objectSpread({},state),{},{login:action.login,entity:action.entity,loginLoading:true});case\"LOGOUT\":return _objectSpread({},initialState);default:throw new Error(\"Unhanded action type: \".concat(action.type));}}var UserStateContext=/*#__PURE__*/createContext();var UserDispatchcontext=/*#__PURE__*/createContext();export function UserProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return/*#__PURE__*/_jsx(UserStateContext.Provider,{value:state,children:/*#__PURE__*/_jsx(UserDispatchcontext.Provider,{value:dispatch,children:children})});}export function useStateUser(){return useContext(UserStateContext);}export function useDispatchUser(){return useContext(UserDispatchcontext);}export function signinUser(_x,_x2){return _signinUser.apply(this,arguments);}function _signinUser(){_signinUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,userInfo){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"/api/signin\",userInfo//json object?\n);case 3:response=_context.sent;console.log(\"res data\",response.data);if(response.data){dispatch({type:\"SIGNIN\"});}return _context.abrupt(\"return\",response.data);case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);//dispatch({ type: \"GET_DATA_FAIL\", error: e });\nconsole.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return _signinUser.apply(this,arguments);}export function idCheck(_x3,_x4){return _idCheck.apply(this,arguments);}function _idCheck(){_idCheck=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,user_id){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"/api/idcheck\",{user_id:user_id});case 3:response=_context2.sent;console.log(\"res data\",response.data);if(response.data){dispatch({type:\"ID_CHECK\",idCheck:response.data.status});}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return _idCheck.apply(this,arguments);}export function loginCheck(_x5,_x6,_x7){return _loginCheck.apply(this,arguments);}function _loginCheck(){_loginCheck=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,user_id,password){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post(\"/api/login\",{user_id:user_id,password:password});case 3:response=_context3.sent;console.log(\"login check = \",response);if(response.data){dispatch({type:\"LOGIN\",login:response.data.status,entity:response.data});}return _context3.abrupt(\"return\",response.data);case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return _loginCheck.apply(this,arguments);}export function logout(dispatch){dispatch({type:\"LOGOUT\"});}function formattingDateTostring(date){var year=date.getFullYear();var month=1+date.getMonth();month=month>=10?month:\"0\"+month;var day=date.getDate();day=day>=10?day:\"0\"+day;return year+\"-\"+month+\"-\"+day;}","map":{"version":3,"sources":["/Users/sa/dev/git/comicstack-backend/webapp/src/contextAPI/user.js"],"names":["React","useReducer","useContext","createContext","axios","initialState","error","loading","entity","user_id","password","address","phone_number","persnal_basic_agree","persnal_share_agree","email","sms_agree","email_agree","name","status","signinLoading","signin","idCheckLoading","idCheck","loginLoading","login","reducer","state","action","type","signinloading","Error","UserStateContext","UserDispatchcontext","UserProvider","children","dispatch","useStateUser","useDispatchUser","signinUser","userInfo","post","response","console","log","data","loginCheck","logout","formattingDateTostring","date","year","getFullYear","month","getMonth","day","getDate"],"mappings":"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","sourcesContent":["import React, { useReducer, useContext, createContext } from \"react\";\nimport axios from \"axios\";\n\n\nconst initialState = {\n\terror: false,\n\tloading: false,\n\tentity: {\n\t\tuser_id: \"\",\n\t\tpassword: \"\",\n\t\taddress: \"\",\n\t\tphone_number: \"\",\n\t\tpersnal_basic_agree: false,\n\t\tpersnal_share_agree: false,\n\t\temail: \"\",\n\t\tsms_agree: false,\n\t\temail_agree: false,\n\t\tname: \"\",\n    status: false,\n\t},\n  signinLoading: false,\n  signin: false,\n  idCheckLoading: false,\n  idCheck: false,\n  loginLoading: false,\n  login: false,\n}\n\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"SIGNIN\":\n      return {\n        ...state,\n        // signin: action.data,\n\t\t\t\tsigninloading: true\n      };\n    case \"ID_CHECK\":\n      return {\n        ...state,\n        idCheck: action.idCheck,\n\t\t\t\tidCheckLoading: true\n      };\n    case \"LOGIN\":\n      return {\n        ...state,\n        login: action.login,\n        entity: action.entity,\n\t\t\t\tloginLoading: true\n      };\n    case \"LOGOUT\":\n      return {\n        ...initialState\n      };\n    default:\n      throw new Error(`Unhanded action type: ${action.type}`);\n  }\n}\n\nconst UserStateContext = createContext();\nconst UserDispatchcontext = createContext();\n\nexport function UserProvider({ children }) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return (\n    <UserStateContext.Provider value={state}>\n      <UserDispatchcontext.Provider value={dispatch}>\n        {children}\n      </UserDispatchcontext.Provider>\n    </UserStateContext.Provider>\n  );\n}\n\nexport function useStateUser() {\n  return useContext(UserStateContext);\n}\n\nexport function useDispatchUser() {\n  return useContext(UserDispatchcontext);\n}\n\nexport async function signinUser(dispatch, userInfo) {\n  try {\n    const response = await axios.post(\n      \"/api/signin\",\n\t\t\tuserInfo  //json object?\n    );\n    console.log(\"res data\", response.data);\n    if (response.data) {\n      dispatch({ type: \"SIGNIN\" });\n    }\n    return response.data;\n  } catch (e) {\n    //dispatch({ type: \"GET_DATA_FAIL\", error: e });\n    console.log(e);\n  }\n}\n\nexport async function idCheck(dispatch, user_id){\n  try {\n    const response = await axios.post(\n      \"/api/idcheck\",\n      { user_id }\n    )\n    console.log(\"res data\", response.data);\n    if(response.data){\n      dispatch({ type: \"ID_CHECK\", idCheck: response.data.status })\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nexport async function loginCheck(dispatch, user_id, password){\n  try {\n    const response = await axios.post(\n      \"/api/login\",\n      { user_id, password }\n    )\n    console.log(\"login check = \", response);\n    if(response.data){\n      dispatch({ type: \"LOGIN\", login: response.data.status, entity: response.data })\n    }\n    return response.data\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nexport function logout(dispatch){\n  dispatch({ type: \"LOGOUT\" })\n}\n\n\n\nfunction formattingDateTostring(date) {\n  const year = date.getFullYear();\n  let month = 1 + date.getMonth();\n  month = month >= 10 ? month : \"0\" + month;\n  let day = date.getDate();\n  day = day >= 10 ? day : \"0\" + day;\n  return year + \"-\" + month + \"-\" + day;\n}\n"]},"metadata":{},"sourceType":"module"}